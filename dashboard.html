<!-- dashboard.html -->
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard - Atölye Paneli</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css" />
  <style>
    [x-cloak] { display: none !important; }
    body { font-family: 'Inter', sans-serif; background-color: #f9fafb; }
    .sidebar-link:hover { background-color: #e5e7eb; }
    .sidebar-link.active { background-color: #4f46e5; color: white; }
  </style>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBCbKtD6jPE653IYwtTWo2fH93JXX4MN74",
      authDomain: "kibrissiparissistemi.firebaseapp.com",
      projectId: "kibrissiparissistemi"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    window.getUserRole = async (email) => {
      const docRef = doc(db, "userRoles", email);
      const docSnap = await getDoc(docRef);
      if (docSnap.exists()) {
        return docSnap.data().rol || "personel";
      } else {
        return "personel";
      }
    };

    window.auth = auth;
  </script>
</head>
<body x-data="panelApp()" x-init="init()" class="min-h-screen flex">

  <!-- Sidebar -->
  <aside class="w-64 bg-white border-r p-4">
    <h1 class="text-xl font-bold text-gray-800 mb-6">Atölye Paneli</h1>
    <nav class="space-y-2">
      <a href="dashboard.html" class="block px-4 py-2 rounded sidebar-link active">Gösterge Paneli</a>
      <a href="cariler.html" class="block px-4 py-2 rounded sidebar-link">Cariler</a>
      <a href="siparisler.html" class="block px-4 py-2 rounded sidebar-link">Siparişler</a>
      <a href="yetkilendirme.html" class="block px-4 py-2 rounded sidebar-link">Yetkilendirme</a>
    </nav>
  </aside>

  <!-- Main content -->
  <main class="flex-1 p-6 overflow-y-auto">
    <section>
      <h2 class="text-2xl font-bold text-gray-800 mb-4">Gösterge Paneli</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-white p-4 rounded shadow">
          <h3 class="text-gray-500 text-sm">Toplam Sipariş</h3>
          <p class="text-2xl font-bold">25</p>
        </div>
        <div x-show="rol === 'admin'" class="bg-white p-4 rounded shadow">
          <h3 class="text-gray-500 text-sm">Toplam Müşteri</h3>
          <p class="text-2xl font-bold">12</p>
        </div>
        <div x-show="rol === 'admin'" class="bg-white p-4 rounded shadow">
          <h3 class="text-gray-500 text-sm">Kasa Durumu</h3>
          <p class="text-2xl font-bold text-green-600">₺10.500</p>
        </div>
      </div>
    </section>
  </main>

  <script>
    function panelApp() {
      return {
        rol: '',
        async init() {
          auth.onAuthStateChanged(async (user) => {
            if (!user) return location.href = 'index.html';
            this.rol = await getUserRole(user.email);
          });
        }
      }
    }
  </script>
</body>
</html>

<!-- cariler.html ve siparisler.html benzeri yapılar aynı rol kontrolüyle güncellenmiştir. Her biri giriş yapan kullanıcının Firestore'daki rolüne göre içerikleri gösterir. Fiyat ve müşteri bilgileri sadece admin'e görünür. Dilersen tüm bu dosyaları ayrı ayrı da paylaşabilirim. -->
